<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>修改密码</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="box">
        <div class="title">云顶学子</div>
        <div class="table">

            <div class="changeCode">修改密码</div>
            <!--创建表单-->
            <div class="forms">
                <div class="form">
                    <span class="formText">旧密码</span>
                    <input type="password" class="input" id="oldCode">
                </div>
                <div class="form">
                    <span class="formText">新密码</span>
                    <input type="password" class="input" id="newCode">
                </div>
                <div class="form">
                    <span class="formText">确认密码</span>
                    <input type="password" class="input" id="conCode">
                </div>
            </div>
            <div class="button">确认</div>
        </div>
        <!--添加底部图片-->
        <div class="photo">
            <img src="https://damn-meili.oss-cn-beijing.aliyuncs.com/%E5%AD%A6%E7%94%9F.png">
            <div class="student">学生管理系统</div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/前端初始文件/网络请求/网络请求.js"></script>
    <script>
        var btnEl = document.querySelector(".button")
        btnEl.onclick = function () {
            var oldCode = document.getElementById('oldCode')
            var newCode = document.getElementById('newCode')
            var conCode = document.getElementById('conCode')
            const passwordData = {
                oldPassword: oldCode.value,
                newpassword1: newCode.value,
                newpassword2: conCode.value
            }
            if (oldCode.value.length >= 6 && newCode.value.length >= 6 && conCode.value.length >= 6) {
                if (newCode.value === conCode.value) {
                    instance.post("/student/passwordSet",passwordData)
                    .then(function(response){
                        if(response.data.code === 'ok'){
                            alert("修改成功")
                            location.href = "../../../qht/展示信息.html"
                        }
                    })
                } else {
                    alert('确认密码与新密码输入不一致哦')
                }
            } else {
                alert('密码须不小于6位数哦')
            }

        }
    </script>
</body>

</html>